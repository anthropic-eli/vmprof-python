# VMprof Python client

[![Build Status on TravisCI](https://travis-ci.org/vmprof/vmprof-python.svg?branch=master)](https://travis-ci.org/vmprof/vmprof-python)
[![Build Status on TeamCity](https://teamcity.jetbrains.com/app/rest/builds/buildType:(id:VMprofPython_TestsPy27Win)/statusIcon)](https://teamcity.jetbrains.com/project.html?projectId=VMprofPython)
[![Read The Docs](https://readthedocs.org/projects/vmprof/badge/?version=latest)](https://vmprof.readthedocs.org/en/latest/)


See https://vmprof.readthedocs.org for up to date info

## Basic usage

###Linux
```console
sudo apt-get install python-dev
pip install vmprof
python -m vmprof <your program> <your program args>
```

###Windows
Install Microsoft Visual C++ Compiler for Python 2.7
	
	pip install vmprof

For development:
	pip install -e .

## vmprofshow

`vmprofshow` is a command line tool that comes with **VMprof** which can read profile files generated by **VMprof** and produce a nicely formatted output.

Here is an example of how to use:

Clone the vmprof repo first to use a minimalistic cpuburn.py:

```console
git clone https://github.com/vmprof/vmprof-python
cd vmprof-python
```

Run that smallish program which burns CPU cycles (with vmprof enabled):

```console
python tests/cpuburn.py
```

This will produce a profile file `vmprof_cpuburn.dat`.

Now display the profile:

```console
vmprofshow vmprof_cpuburn.dat
```

You will see a (colored) output:

```console
oberstet@thinkpad-t430s:~/scm/vmprof-python$ vmprofshow vmprof_cpuburn.dat
100.0%  <module>  100.0%  tests/cpuburn.py:1
100.0% .. test  100.0%  tests/cpuburn.py:35
100.0% .... burn  100.0%  tests/cpuburn.py:26
 99.2% ...... _iterate  99.2%  tests/cpuburn.py:19
 97.7% ........ _iterate  98.5%  tests/cpuburn.py:19
 22.9% .......... _next_rand  23.5%  tests/cpuburn.py:14
 22.9% ............ JIT code  100.0%  0x7fa7dba57a10
 74.7% .......... JIT code  76.4%  0x7fa7dba57a10
  0.1% .......... JIT code  0.1%  0x7fa7dba583b0
  0.5% ........ _next_rand  0.5%  tests/cpuburn.py:14
  0.0% ........ JIT code  0.0%  0x7fa7dba583b0
```


## Line profiling

vmprof supports line profiling mode, which enables collecting and showing the statistics for separate lines
inside functions.

To enable collection of lines statistics add `--lines` argument to vmprof.

```console
python -m vmprof --lines -o <output-file> <your program> <your program args>
```

To see line statistics for all functions add the `--lines` argument to vmprofshow:
```console
vmprofshow --lines <output-file>
```

To see line statistics for a specific function use the `--filter` argument with the function name:
```console
vmprofshow --lines --filter <function-name> <output-file>
```
